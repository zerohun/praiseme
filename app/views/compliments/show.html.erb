<p id="notice"><%= notice %></p>
<div id="compliment-show" class="round border">

  <div class="row-fluid">
    <div class="span12 user-profile-image">
      <%= link_to user_profile_path(@compliment.receiver) do %>
        <%= image_tag @compliment.receiver.image_url, :class => "img-small img-circle image-shadow" %>
        <div class="receiver-name"><%= @compliment.receiver.username %></div>
      <% end %>
    </div>
  </div>

  <div class="row-fluid">
    <div class="span12 stamp-image">
      <%= render :partial => "/stamps/stamp", :locals => {:stamp =>  @compliment.stamp, :size => "normal"} %>
    </div>
  </div>
</div>

<div id="compliment-text" class="round border">
  <% if current_user.present? && @compliment.is_destroyable_by?(current_user) %>
     <%= link_to_function "x", "$('#destroy-compliment-popup').modal();", :class => "btn btn-mini pull-right no-loading btn-compliment-delete" %>
  <% end %>
  <%= image_tag @compliment.sender.image_url, :class => "img img-small img-circle image-shadow img-profile pull-left" %>
  <span class="text round pull-left"><%= @compliment.description %></span>
  <div class="clear-both"></div>
</div>

<%= link_to_function "More Comments", "$.getScript($('#comment-pagination .pagination a[rel=next]').attr('href'))", :class => "btn btn-success btn-more-comments no-loading" %>
<div id="comments">
  <%= render @comments.reverse %>
</div>
<div id="comment-pagination", class="hidden">
  <%= paginate @comments %>
</div>
<%= form_for [@compliment, @compliment.comments.new], :remote => true do |f| %>
  <%= hidden_field_tag :last_comment_id, @comments.last.try("id") %>
  <%= f.text_area :content, :rows => 1, :placeholder => "Write a comment", :class => "round limited-text", :data => {:limit => 200} %>
  <span class="text-length-view" data-field="comment_content"></span>
<% end %>

<div id="destroy-compliment-popup" class="modal hide fade">
  <div class="modal-header">
    <h3>Do you want to delete this compliment?</h3>
  </div>
  <div class="modal-body">
    <%= link_to "Yes", @compliment, :method => :delete, :class => "btn btn-primary no-loading" %>
    <%= link_to_function "No", "", :class => "btn btn-primary no-loading", :data => {:dismiss => "modal"}, :aria => {:hidden => true} %>
  </div>
</div>
